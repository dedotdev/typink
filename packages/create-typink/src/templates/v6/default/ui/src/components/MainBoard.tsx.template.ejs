<% if (options.presetContract === 'flipper') { %>
import { Box, Button, Flex, Heading, Text } from '@chakra-ui/react';
import PendingText from '@/components/shared/PendingText.tsx';
import { ContractId } from 'contracts/deployments';
import { useContract, useContractQuery, useContractTx } from 'typink';
import { txToaster } from '@/utils/txToaster.tsx';
import { FlipperContractApi } from 'contracts/types/flipper';

export default function FlipperBoard() {
  const { contract } = useContract<FlipperContractApi>(ContractId.FLIPPER);
  const setMessageTx = useContractTx(contract, 'flip');

  const { data: value, isLoading } = useContractQuery({
    contract,
    fn: 'get',
    watch: true,
  });

  const handleFlip = async () => {
    if (!contract) return;

    const toaster = txToaster('Signing transaction...');

    try {
      await setMessageTx.signAndSend({
        callback: ({ status }) => {
          console.log(status);

          toaster.updateTxStatus(status);
        },
      });
    } catch (e: any) {
      console.error(e, e.message);
      toaster.onError(e);
    }
  };

  return (
    <Box>
      <Heading size='md'>Flipper Contract</Heading>
      <Flex my={4} gap={2}>
        <Text>Flipper Value:</Text>
        <PendingText fontWeight='600' isLoading={isLoading} color='primary.500'>
          {value === undefined ? '---' : value ? 'TRUE' : 'FALSE'}
        </PendingText>
      </Flex>
      <Button mt={2} isLoading={setMessageTx.inBestBlockProgress} onClick={handleFlip}>
        Flip!
      </Button>
    </Box>
  );
}
<% } %>

<% if (options.presetContract === 'psp22') { %>
import { Box, Button, Divider, Heading } from '@chakra-ui/react';
import PendingText from '@/components/shared/PendingText.tsx';
import WalletSelection from '@/components/shared/WalletSelection.tsx';
import { useApp } from '@/providers/AppProvider.tsx';
import { txToaster } from '@/utils/txToaster.tsx';
import { formatBalance, useContractQuery, useContractTx, usePSP22Balance, useTypink } from 'typink';

export default function Psp22Board() {
  const { psp22Contract: contract } = useApp();
  const { connectedAccount } = useTypink();
  const mintTx = useContractTx(contract, 'psp22MintableMint');

  const { data: tokenName, isLoading: loadingTokenName } = useContractQuery({
    contract,
    fn: 'psp22MetadataTokenName',
  });

  const { data: tokenSymbol, isLoading: loadingTokenSymbol } = useContractQuery({
    contract,
    fn: 'psp22MetadataTokenSymbol',
  });

  const { data: tokenDecimal, isLoading: loadingTokenDecimal } = useContractQuery({
    contract,
    fn: 'psp22MetadataTokenDecimals',
  });

  const {
    data: totalSupply,
    isLoading: loadingTotalSupply,
    refresh: refreshTotalSupply,
  } = useContractQuery({
    contract,
    fn: 'psp22TotalSupply',
  });

  const { data: myBalance, isLoading: loadingBalance } = usePSP22Balance({
    contractAddress: contract?.address,
    address: connectedAccount?.address,
    watch: true,
  });

  const mintNewToken = async () => {
    if (!tokenDecimal) return;

    const toaster = txToaster();
    try {
      await mintTx.signAndSend({
        args: [BigInt(100 * Math.pow(10, tokenDecimal))],
        callback: (result) => {
          const { status } = result;
          console.log(status);

          if (status.type === 'BestChainBlockIncluded') {
            refreshTotalSupply();
          }

          toaster.onTxProgress(result);
        },
      });
    } catch (e: any) {
      console.error(e);
      toaster.onTxError(e);
    }
  };

  return (
    <Box>
      <Heading size='md'>PSP22 Contract</Heading>
      <Box mt={4}>
        <Box mb={2}>
          Token Name:{' '}
          <PendingText fontWeight='600' isLoading={loadingTokenName}>
            {tokenName}
          </PendingText>
        </Box>
        <Box mb={2}>
          Token Symbol:{' '}
          <PendingText fontWeight='600' isLoading={loadingTokenSymbol}>
            {tokenSymbol}
          </PendingText>
        </Box>
        <Box mb={2}>
          Token Decimal:{' '}
          <PendingText fontWeight='600' isLoading={loadingTokenDecimal}>
            {tokenDecimal}
          </PendingText>
        </Box>
        <Box mb={2}>
          Total Supply:{' '}
          <PendingText fontWeight='600' isLoading={loadingTotalSupply}>
            {formatBalance(totalSupply, { decimals: tokenDecimal, symbol: tokenSymbol })}
          </PendingText>
        </Box>
        <Divider my={4} />
        <Box>
          My Balance:{' '}
          {connectedAccount ? (
            <PendingText fontWeight='600' isLoading={loadingBalance}>
              {formatBalance(myBalance, { decimals: tokenDecimal, symbol: tokenSymbol })}
            </PendingText>
          ) : (
            <WalletSelection buttonProps={{ size: 'xs' }} />
          )}
        </Box>
        {connectedAccount && (
          <Box mt={4}>
            <Button size='sm' onClick={mintNewToken} isLoading={mintTx.inBestBlockProgress}>
              Mint 100 {tokenSymbol}
            </Button>
          </Box>
        )}
      </Box>
    </Box>
  );
}
<% } %>
